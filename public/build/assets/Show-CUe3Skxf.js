import{r as m,j as e,H as _,L as y,b as j}from"./app-2KutEqL2.js";import{A as C}from"./AuthenticatedLayout-DfCoeJWv.js";import{P as x}from"./PrimaryButton-Duk-7vCM.js";import{S as p,D as k}from"./DangerButton-M8wQaS-D.js";import{T as d}from"./TextInput-BW4MlzIu.js";import{I as l}from"./InputLabel-458NYyOD.js";import"./ApplicationLogo-DjR4Xp_r.js";import"./transition-BAKxU7HE.js";const F={draft:"bg-gray-100 text-gray-800",sent:"bg-blue-100 text-blue-800",paid:"bg-green-100 text-green-800",overdue:"bg-red-100 text-red-800"};function L({invoice:t}){const[g,u]=m.useState(t.items),[i,n]=m.useState(null),[r,c]=m.useState({description:"",quantity:"",unit_price:""}),[h,o]=m.useState(!1),f=()=>{!r.description||!r.quantity||!r.unit_price||j.post(route("invoices.items.store",t.id),r,{onSuccess:s=>{u(s.props.invoice.items),c({description:"",quantity:"",unit_price:""}),o(!1)},onError:s=>{console.error(s)}})},N=s=>{j.put(route("invoices.items.update",[t.id,s.id]),i,{onSuccess:a=>{u(a.props.invoice.items),n(null)},onError:a=>{console.error(a)}})},b=s=>{confirm("Are you sure you want to delete this item?")&&j.delete(route("invoices.items.destroy",[t.id,s.id]),{onSuccess:a=>{u(a.props.invoice.items)},onError:a=>{console.error(a)}})},v=s=>{n({description:s.description,quantity:s.quantity,unit_price:s.unit_price})},I=()=>{n(null)},w=()=>{c({description:"",quantity:"",unit_price:""}),o(!1)};return e.jsxs(C,{children:[e.jsx(_,{title:`Invoice ${t.number}`}),e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(y,{href:route("invoices.index"),children:e.jsx(p,{children:"â† Back to Invoices"})}),e.jsxs("h1",{className:"text-2xl font-semibold text-gray-900",children:["Invoice ",t.number]}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${F[t.status]}`,children:t.status})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:[e.jsx("div",{className:"p-6 bg-white border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Invoice Items"}),t.can_be_modified&&e.jsx(x,{onClick:()=>o(!0),disabled:h,children:"+ Add Item"})]})}),e.jsxs("div",{className:"p-6",children:[h&&e.jsx("div",{className:"border rounded-lg p-4 mb-4 bg-gray-50",children:e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end",children:[e.jsxs("div",{className:"col-span-6",children:[e.jsx(l,{children:"Description"}),e.jsx(d,{value:r.description,onChange:s=>c({...r,description:s.target.value}),placeholder:"Item description"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(l,{children:"Quantity"}),e.jsx(d,{type:"number",step:"0.01",value:r.quantity,onChange:s=>c({...r,quantity:s.target.value}),placeholder:"1"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(l,{children:"Unit Price"}),e.jsx(d,{type:"number",step:"0.01",value:r.unit_price,onChange:s=>c({...r,unit_price:s.target.value}),placeholder:"0.00"})]}),e.jsxs("div",{className:"col-span-2 flex gap-2",children:[e.jsx(x,{onClick:f,children:"Save"}),e.jsx(p,{onClick:w,children:"Cancel"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:i&&i.id===s.id?e.jsx(d,{value:i.description,onChange:a=>n({...i,description:a.target.value})}):s.description}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:i&&i.id===s.id?e.jsx(d,{type:"number",step:"0.01",value:i.quantity,onChange:a=>n({...i,quantity:a.target.value})}):s.quantity}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:i&&i.id===s.id?e.jsx(d,{type:"number",step:"0.01",value:i.unit_price,onChange:a=>n({...i,unit_price:a.target.value})}):`$${parseFloat(s.unit_price).toFixed(2)}`}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900",children:["$",parseFloat(s.total).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 text-right text-sm font-medium",children:t.can_be_modified&&e.jsx("div",{className:"flex justify-end gap-2",children:i&&i.id===s.id?e.jsxs(e.Fragment,{children:[e.jsx(x,{onClick:()=>N(s),children:"Save"}),e.jsx(p,{onClick:I,children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{onClick:()=>v(s),children:"Edit"}),e.jsx(k,{onClick:()=>b(s),children:"Delete"})]})})})]},s.id))})]})}),g.length===0&&!h&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"No items yet"}),t.can_be_modified&&e.jsx(x,{onClick:()=>o(!0),children:"Add First Item"})]})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:[e.jsx("div",{className:"p-6 bg-white border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Invoice Details"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium text-gray-500",children:"Client"}),e.jsx("p",{className:"font-medium",children:t.client.name}),t.client.email&&e.jsx("p",{className:"text-sm text-gray-600",children:t.client.email})]}),e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium text-gray-500",children:"Issue Date"}),e.jsx("p",{className:"font-medium",children:t.issued_at})]}),e.jsxs("div",{children:[e.jsx(l,{className:"text-sm font-medium text-gray-500",children:"Due Date"}),e.jsx("p",{className:"font-medium",children:t.due_at})]}),e.jsx("hr",{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["$",parseFloat(t.subtotal).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tax (10%):"}),e.jsxs("span",{children:["$",parseFloat(t.tax).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total:"}),e.jsxs("span",{children:["$",parseFloat(t.total).toFixed(2)]})]})]}),e.jsx("hr",{}),e.jsx("div",{className:"flex gap-2",children:e.jsx(y,{href:route("invoices.edit",t.id),children:e.jsx(x,{disabled:!t.can_be_modified,children:"Edit Invoice"})})})]})]})})]})]})]})}export{L as default};
